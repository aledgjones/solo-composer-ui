{"id":"X8nC","dependencies":[{"name":"/home/aled/solo-composer-ui/tsconfig.json","includedInParent":true,"mtime":1598401787877},{"name":"/home/aled/solo-composer-ui/package.json","includedInParent":true,"mtime":1598403412572},{"name":"./utils","loc":{"line":1,"column":28},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts"},{"name":"../use-store","loc":{"line":2,"column":22},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/use-store.ts"},{"name":"../utils","loc":{"line":3,"column":21},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/utils.ts"},{"name":"../score-instrument/utils","loc":{"line":4,"column":24},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-instrument/utils.ts"},{"name":"../score-stave/utils","loc":{"line":5,"column":29},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-stave/utils.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.flowActions=void 0;var e=require(\"./utils\"),r=require(\"../use-store\"),t=require(\"../utils\"),s=require(\"../score-instrument/utils\"),o=require(\"../score-stave/utils\"),n={create:function(){var t=(0,e.create_flow)();return r.store.update(function(e){e.score.flows.order.push(t.key),e.score.flows.by_key[t.key]=t}),t.key},rename:function(e,t){return r.store.update(function(r){r.score.flows.by_key[e].title=t})},length:function(e,t){return r.store.update(function(r){r.score.flows.by_key[e].length=t})},reorder:function(e,s){return r.store.update(function(r){(0,t.move)(r.score.flows.order,e,s)})},assign_player:function(e,t){return r.store.update(function(r,n){var u=r.score.flows.by_key[e];u.players[t]=!0,n.score.players.by_key[t].instruments.forEach(function(e){var r=n.score.instruments[e],t=(0,s.get_def)(r.id);r.staves.forEach(function(e,r){var s=t.staves[r],n=(0,o.create_stave)(e,s);u.staves[e]=n})})})},unassign_player:function(e,t){return r.store.update(function(r,s){s.score.players.by_key[t].instruments.forEach(function(t){s.score.instruments[t].staves.forEach(function(t){delete r.score.flows.by_key[e].staves[t]})}),delete r.score.flows.by_key[e].players[t]})},remove:function(e){return r.store.update(function(r,t){r.score.flows.order=t.score.flows.order.filter(function(r){return r!==e}),delete r.score.flows.by_key[e]})}};exports.flowActions=n;"},"sourceMaps":{"js":{"mappings":[{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":0}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":13}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":20}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":35}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":43}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":56}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":57}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":64}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":68}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":76}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":93}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":101}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":109}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":120}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":122}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":130}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":146}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":148}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":156}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":168}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":170}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":178}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":207}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":209}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":217}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":13},"generated":{"line":1,"column":241}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":27},"generated":{"line":1,"column":243}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":9,"column":4},"generated":{"line":1,"column":244}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":9,"column":12},"generated":{"line":1,"column":251}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":10,"column":14},"generated":{"line":1,"column":262}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":10,"column":14},"generated":{"line":1,"column":266}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":10,"column":27},"generated":{"line":1,"column":269}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":10,"column":8},"generated":{"line":1,"column":271}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":10,"column":8},"generated":{"line":1,"column":273}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":15,"column":15},"generated":{"line":1,"column":288}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":1,"column":295}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":1,"column":297}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":1,"column":303}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":11,"column":21},"generated":{"line":1,"column":310}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":11,"column":22},"generated":{"line":1,"column":319}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":322}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":12,"column":14},"generated":{"line":1,"column":324}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":12,"column":20},"generated":{"line":1,"column":330}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":12,"column":26},"generated":{"line":1,"column":336}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":12,"column":32},"generated":{"line":1,"column":342}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":12,"column":37},"generated":{"line":1,"column":347}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":12,"column":42},"generated":{"line":1,"column":349}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":13,"column":12},"generated":{"line":1,"column":354}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":13,"column":14},"generated":{"line":1,"column":356}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":1,"column":362}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":13,"column":26},"generated":{"line":1,"column":368}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":13,"column":33},"generated":{"line":1,"column":375}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":1,"column":377}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":13,"column":45},"generated":{"line":1,"column":382}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":15,"column":15},"generated":{"line":1,"column":386}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":15,"column":20},"generated":{"line":1,"column":388}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":393}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":17,"column":12},"generated":{"line":1,"column":400}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":1,"column":409}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":17,"column":31},"generated":{"line":1,"column":411}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":414}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":421}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":18,"column":14},"generated":{"line":1,"column":423}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":18,"column":14},"generated":{"line":1,"column":429}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":18,"column":21},"generated":{"line":1,"column":436}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":18,"column":22},"generated":{"line":1,"column":445}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":19,"column":12},"generated":{"line":1,"column":448}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":19,"column":14},"generated":{"line":1,"column":450}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":19,"column":20},"generated":{"line":1,"column":456}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":19,"column":26},"generated":{"line":1,"column":462}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":19,"column":33},"generated":{"line":1,"column":469}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":19,"column":43},"generated":{"line":1,"column":472}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":19,"column":51},"generated":{"line":1,"column":478}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":483}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":21,"column":12},"generated":{"line":1,"column":490}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":1,"column":499}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":501}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":504}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":511}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":22,"column":14},"generated":{"line":1,"column":513}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":22,"column":14},"generated":{"line":1,"column":519}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":22,"column":21},"generated":{"line":1,"column":526}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":22,"column":22},"generated":{"line":1,"column":535}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":23,"column":12},"generated":{"line":1,"column":538}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":23,"column":14},"generated":{"line":1,"column":540}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":23,"column":20},"generated":{"line":1,"column":546}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":23,"column":26},"generated":{"line":1,"column":552}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":23,"column":33},"generated":{"line":1,"column":559}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":23,"column":43},"generated":{"line":1,"column":562}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":23,"column":52},"generated":{"line":1,"column":569}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":574}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":25,"column":13},"generated":{"line":1,"column":582}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":25,"column":14},"generated":{"line":1,"column":591}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":25,"column":33},"generated":{"line":1,"column":593}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":596}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":603}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":26,"column":14},"generated":{"line":1,"column":605}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":26,"column":14},"generated":{"line":1,"column":611}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":26,"column":21},"generated":{"line":1,"column":618}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":26,"column":22},"generated":{"line":1,"column":627}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":631}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":633}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":635}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":641}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":23},"generated":{"line":1,"column":643}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":29},"generated":{"line":1,"column":649}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":35},"generated":{"line":1,"column":655}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":42},"generated":{"line":1,"column":661}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":27,"column":53},"generated":{"line":1,"column":663}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":1,"column":669}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":683}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":29,"column":20},"generated":{"line":1,"column":692}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":29,"column":38},"generated":{"line":1,"column":694}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":697}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":704}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":1,"column":706}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":1,"column":712}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":30,"column":21},"generated":{"line":1,"column":719}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":1,"column":728}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":30,"column":29},"generated":{"line":1,"column":730}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":733}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":737}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":31,"column":25},"generated":{"line":1,"column":739}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":31,"column":31},"generated":{"line":1,"column":741}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":31,"column":37},"generated":{"line":1,"column":747}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":31,"column":43},"generated":{"line":1,"column":753}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":31,"column":50},"generated":{"line":1,"column":760}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":32,"column":12},"generated":{"line":1,"column":763}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":32,"column":17},"generated":{"line":1,"column":765}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":32,"column":25},"generated":{"line":1,"column":773}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":32,"column":39},"generated":{"line":1,"column":777}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":34,"column":27},"generated":{"line":1,"column":779}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":34,"column":33},"generated":{"line":1,"column":781}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":34,"column":39},"generated":{"line":1,"column":787}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":34,"column":47},"generated":{"line":1,"column":795}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":34,"column":54},"generated":{"line":1,"column":802}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":35,"column":19},"generated":{"line":1,"column":805}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":35,"column":31},"generated":{"line":1,"column":817}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":35,"column":39},"generated":{"line":1,"column":825}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":35,"column":40},"generated":{"line":1,"column":834}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":36,"column":22},"generated":{"line":1,"column":837}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":36,"column":22},"generated":{"line":1,"column":841}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":36,"column":35},"generated":{"line":1,"column":843}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":36,"column":41},"generated":{"line":1,"column":845}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":36,"column":47},"generated":{"line":1,"column":851}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":36,"column":59},"generated":{"line":1,"column":863}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":37,"column":22},"generated":{"line":1,"column":866}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":37,"column":38},"generated":{"line":1,"column":869}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":37,"column":46},"generated":{"line":1,"column":871}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":37,"column":46},"generated":{"line":1,"column":873}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":37,"column":46},"generated":{"line":1,"column":882}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":37,"column":57},"generated":{"line":1,"column":884}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":38,"column":16},"generated":{"line":1,"column":888}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":1,"column":890}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":38,"column":34},"generated":{"line":1,"column":897}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":38,"column":42},"generated":{"line":1,"column":905}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":38,"column":43},"generated":{"line":1,"column":914}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":38,"column":53},"generated":{"line":1,"column":916}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":39,"column":26},"generated":{"line":1,"column":919}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":39,"column":26},"generated":{"line":1,"column":923}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":39,"column":37},"generated":{"line":1,"column":925}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":39,"column":51},"generated":{"line":1,"column":927}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":39,"column":58},"generated":{"line":1,"column":934}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":1,"column":937}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":40,"column":34},"generated":{"line":1,"column":940}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":40,"column":47},"generated":{"line":1,"column":942}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":40,"column":47},"generated":{"line":1,"column":944}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":40,"column":47},"generated":{"line":1,"column":958}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":40,"column":57},"generated":{"line":1,"column":960}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":41,"column":20},"generated":{"line":1,"column":963}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":41,"column":25},"generated":{"line":1,"column":965}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":41,"column":32},"generated":{"line":1,"column":972}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":41,"column":44},"generated":{"line":1,"column":975}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":45,"column":4},"generated":{"line":1,"column":984}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":45,"column":21},"generated":{"line":1,"column":1000}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":1,"column":1009}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":45,"column":40},"generated":{"line":1,"column":1011}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":1014}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":1021}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":46,"column":14},"generated":{"line":1,"column":1023}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":46,"column":14},"generated":{"line":1,"column":1029}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":1036}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":46,"column":22},"generated":{"line":1,"column":1045}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":46,"column":29},"generated":{"line":1,"column":1047}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":1,"column":1050}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":48,"column":33},"generated":{"line":1,"column":1052}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":48,"column":39},"generated":{"line":1,"column":1058}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":48,"column":47},"generated":{"line":1,"column":1066}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":48,"column":54},"generated":{"line":1,"column":1073}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":49,"column":19},"generated":{"line":1,"column":1076}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":49,"column":31},"generated":{"line":1,"column":1088}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":49,"column":39},"generated":{"line":1,"column":1096}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":49,"column":40},"generated":{"line":1,"column":1105}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":1108}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":50,"column":22},"generated":{"line":1,"column":1110}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":50,"column":28},"generated":{"line":1,"column":1116}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":50,"column":40},"generated":{"line":1,"column":1128}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":50,"column":55},"generated":{"line":1,"column":1131}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":50,"column":62},"generated":{"line":1,"column":1138}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":1,"column":1146}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":51,"column":21},"generated":{"line":1,"column":1155}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":52,"column":31},"generated":{"line":1,"column":1165}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":52,"column":37},"generated":{"line":1,"column":1167}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":52,"column":43},"generated":{"line":1,"column":1173}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":52,"column":49},"generated":{"line":1,"column":1179}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":52,"column":56},"generated":{"line":1,"column":1186}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":52,"column":66},"generated":{"line":1,"column":1189}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":1,"column":1196}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":59,"column":19},"generated":{"line":1,"column":1210}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":1,"column":1212}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":59,"column":31},"generated":{"line":1,"column":1218}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":59,"column":37},"generated":{"line":1,"column":1224}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":59,"column":44},"generated":{"line":1,"column":1231}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":59,"column":54},"generated":{"line":1,"column":1234}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":59,"column":62},"generated":{"line":1,"column":1242}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":1,"column":1248}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":61,"column":12},"generated":{"line":1,"column":1255}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":61,"column":13},"generated":{"line":1,"column":1264}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":1267}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":1274}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":62,"column":14},"generated":{"line":1,"column":1276}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":62,"column":14},"generated":{"line":1,"column":1282}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":1289}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":62,"column":22},"generated":{"line":1,"column":1298}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":62,"column":29},"generated":{"line":1,"column":1300}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":1303}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":18},"generated":{"line":1,"column":1305}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":24},"generated":{"line":1,"column":1311}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":30},"generated":{"line":1,"column":1317}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":38},"generated":{"line":1,"column":1323}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":44},"generated":{"line":1,"column":1325}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":50},"generated":{"line":1,"column":1331}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":56},"generated":{"line":1,"column":1337}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":63,"column":62},"generated":{"line":1,"column":1343}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":64,"column":16},"generated":{"line":1,"column":1350}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":64,"column":17},"generated":{"line":1,"column":1359}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":64,"column":23},"generated":{"line":1,"column":1362}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":64,"column":23},"generated":{"line":1,"column":1369}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":64,"column":29},"generated":{"line":1,"column":1373}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":66,"column":19},"generated":{"line":1,"column":1384}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":66,"column":25},"generated":{"line":1,"column":1386}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":66,"column":31},"generated":{"line":1,"column":1392}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":66,"column":37},"generated":{"line":1,"column":1398}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":66,"column":44},"generated":{"line":1,"column":1405}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":1412}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":1420}},{"source":"store/score-flow/actions.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":1432}}],"sources":{"store/score-flow/actions.ts":"import { create_flow } from \"./utils\";\nimport { Flow } from \"./defs\";\nimport { store } from \"../use-store\";\nimport { move } from \"../utils\";\nimport { get_def } from \"../score-instrument/utils\";\nimport { create_stave } from \"../score-stave/utils\";\n\nexport const flowActions = {\n    create: (): string => {\n        const flow: Flow = create_flow();\n        store.update((s) => {\n            s.score.flows.order.push(flow.key);\n            s.score.flows.by_key[flow.key] = flow;\n        });\n        return flow.key;\n    },\n    rename: (flow_key: string, title: string) =>\n        store.update((s) => {\n            s.score.flows.by_key[flow_key].title = title;\n        }),\n    length: (flow_key: string, length: number) =>\n        store.update((s) => {\n            s.score.flows.by_key[flow_key].length = length;\n        }),\n    reorder: (old_index: number, new_index: number) =>\n        store.update((draft) => {\n            move(draft.score.flows.order, old_index, new_index);\n        }),\n    assign_player: (flow_key: string, player_key: string) =>\n        store.update((draft, state) => {\n            const flow = draft.score.flows.by_key[flow_key];\n            flow.players[player_key] = true;\n\n            const player = state.score.players.by_key[player_key];\n            player.instruments.forEach((instrumentKey) => {\n                const instrument = state.score.instruments[instrumentKey];\n                const instrumentDef = get_def(instrument.id);\n                instrument.staves.forEach((staveKey, i) => {\n                    const staveDef = instrumentDef.staves[i];\n                    const stave = create_stave(staveKey, staveDef);\n                    flow.staves[staveKey] = stave;\n                });\n            });\n        }),\n    unassign_player: (flow_key: string, player_key: string) =>\n        store.update((draft, state) => {\n            // remove each instrument from the flow\n            const player = state.score.players.by_key[player_key];\n            player.instruments.forEach((instrumentKey) => {\n                state.score.instruments[instrumentKey].staves.forEach(\n                    (stave_key) => {\n                        delete draft.score.flows.by_key[flow_key].staves[\n                            stave_key\n                        ];\n                    }\n                );\n            });\n\n            delete draft.score.flows.by_key[flow_key].players[player_key];\n        }),\n    remove: (flow_key: string) =>\n        store.update((draft, state) => {\n            draft.score.flows.order = state.score.flows.order.filter(\n                (k) => k !== flow_key\n            );\n            delete draft.score.flows.by_key[flow_key];\n        }),\n};\n"},"lineCount":null}},"error":null,"hash":"321922b5ae360931e51f8aa3700c0de3","cacheData":{"env":{}}}
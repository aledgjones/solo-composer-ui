{"id":"parse/split-notation-track.ts","dependencies":[{"name":"/home/aled/solo-composer-ui/tsconfig.json","includedInParent":true,"mtime":1598401787877},{"name":"/home/aled/solo-composer-ui/package.json","includedInParent":true,"mtime":1598459868758},{"name":"./get-nearest-notation-to-tick","loc":{"line":8,"column":41},"parent":"/home/aled/solo-composer-ui/src/parse/split-notation-track.ts","resolved":"/home/aled/solo-composer-ui/src/parse/get-nearest-notation-to-tick.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.splitNotationTrack = splitNotationTrack;\n\nvar _getNearestNotationToTick = require(\"./get-nearest-notation-to-tick\");\n\nvar __spreadArrays = void 0 && (void 0).__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n};\n\n/**\n * Split the notation track at split points\n *\n * NB. You can safely pass in a split point at the begining of a note -- it will be ignored\n */\nfunction splitNotationTrack(track, split) {\n  var event = (0, _getNearestNotationToTick.getNearestNotationToTick)(split, track); // check for undefined event and only split if split index it's not already the start of an event.\n\n  if (event && event.at !== split) {\n    track[event.at] = {\n      duration: split - event.at,\n      tones: __spreadArrays(event.entry.tones),\n      ties: event.entry.tones.map(function (tone) {\n        return tone.key;\n      })\n    };\n    track[split] = {\n      duration: event.at + event.entry.duration - split,\n      tones: __spreadArrays(event.entry.tones),\n      ties: __spreadArrays(event.entry.ties)\n    };\n  }\n\n  return track;\n}"},"sourceMaps":{"js":{"mappings":[{"source":"parse/split-notation-track.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":8,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":24,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":9,"column":6},"generated":{"line":29,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":9,"column":16},"generated":{"line":29,"column":9}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":9,"column":6},"generated":{"line":29,"column":27}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":10,"column":4},"generated":{"line":29,"column":28}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":9,"column":6},"generated":{"line":29,"column":33}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":29,"column":35}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":9,"column":6},"generated":{"line":29,"column":40}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":11,"column":17},"generated":{"line":29,"column":42}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":30,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":10},"generated":{"line":30,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":30,"column":11}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":18},"generated":{"line":30,"column":14}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":43},"generated":{"line":30,"column":70}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":18},"generated":{"line":30,"column":75}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":50},"generated":{"line":30,"column":77}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":18},"generated":{"line":30,"column":82}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":30,"column":83}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":11,"column":17},"generated":{"line":30,"column":84}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":15,"column":4},"generated":{"line":30,"column":85}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":32,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":8},"generated":{"line":32,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":13},"generated":{"line":32,"column":11}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":17},"generated":{"line":32,"column":15}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":22},"generated":{"line":32,"column":20}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":23},"generated":{"line":32,"column":21}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":17},"generated":{"line":32,"column":23}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":30},"generated":{"line":32,"column":28}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":32,"column":33}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":16,"column":37},"generated":{"line":32,"column":35}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":33,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":33,"column":4}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":33,"column":9}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":14},"generated":{"line":33,"column":10}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":19},"generated":{"line":33,"column":15}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":20},"generated":{"line":33,"column":16}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":33,"column":18}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":33,"column":19}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":26},"generated":{"line":33,"column":22}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":34,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":34,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":20},"generated":{"line":34,"column":14}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":22},"generated":{"line":34,"column":16}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":27},"generated":{"line":34,"column":21}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":30},"generated":{"line":34,"column":24}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":35},"generated":{"line":34,"column":29}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":18,"column":36},"generated":{"line":34,"column":30}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":26},"generated":{"line":34,"column":32}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":12},"generated":{"line":35,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":12},"generated":{"line":35,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":35,"column":11}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":35,"column":13}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":35,"column":27}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":23},"generated":{"line":35,"column":28}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":28},"generated":{"line":35,"column":33}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":29},"generated":{"line":35,"column":34}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":23},"generated":{"line":35,"column":39}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":35},"generated":{"line":35,"column":40}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":35,"column":45}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":26},"generated":{"line":35,"column":46}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":36,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":36,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":16},"generated":{"line":36,"column":10}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":36,"column":12}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":23},"generated":{"line":36,"column":17}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":24},"generated":{"line":36,"column":18}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":36,"column":23}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":30},"generated":{"line":36,"column":24}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":36,"column":29}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":36},"generated":{"line":36,"column":30}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":36,"column":33}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":36,"column":34}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":41},"generated":{"line":36,"column":44}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":36,"column":48}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":45},"generated":{"line":36,"column":50}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":50},"generated":{"line":37,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":50},"generated":{"line":37,"column":15}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":54},"generated":{"line":37,"column":19}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":55},"generated":{"line":37,"column":20}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":50},"generated":{"line":37,"column":23}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":58},"generated":{"line":38,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":38,"column":7}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":26},"generated":{"line":39,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":39,"column":5}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":40,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":40,"column":4}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":13},"generated":{"line":40,"column":9}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":14},"generated":{"line":40,"column":10}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":13},"generated":{"line":40,"column":15}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":40,"column":16}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":23},"generated":{"line":40,"column":19}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":12},"generated":{"line":41,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":12},"generated":{"line":41,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":20},"generated":{"line":41,"column":14}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":22},"generated":{"line":41,"column":16}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":27},"generated":{"line":41,"column":21}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":28},"generated":{"line":41,"column":22}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":22},"generated":{"line":41,"column":24}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":33},"generated":{"line":41,"column":27}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":38},"generated":{"line":41,"column":32}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":39},"generated":{"line":41,"column":33}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":33},"generated":{"line":41,"column":38}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":45},"generated":{"line":41,"column":39}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":22},"generated":{"line":41,"column":47}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":24,"column":56},"generated":{"line":41,"column":50}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":23},"generated":{"line":41,"column":55}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":12},"generated":{"line":42,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":12},"generated":{"line":42,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":17},"generated":{"line":42,"column":11}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":17},"generated":{"line":42,"column":13}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":17},"generated":{"line":42,"column":27}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":23},"generated":{"line":42,"column":28}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":28},"generated":{"line":42,"column":33}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":29},"generated":{"line":42,"column":34}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":23},"generated":{"line":42,"column":39}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":35},"generated":{"line":42,"column":40}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":25,"column":17},"generated":{"line":42,"column":45}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":23},"generated":{"line":42,"column":46}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":12},"generated":{"line":43,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":12},"generated":{"line":43,"column":6}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":16},"generated":{"line":43,"column":10}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":16},"generated":{"line":43,"column":12}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":16},"generated":{"line":43,"column":26}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":22},"generated":{"line":43,"column":27}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":27},"generated":{"line":43,"column":32}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":28},"generated":{"line":43,"column":33}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":22},"generated":{"line":43,"column":38}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":34},"generated":{"line":43,"column":39}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":26,"column":16},"generated":{"line":43,"column":43}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":23},"generated":{"line":44,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":44,"column":5}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":28,"column":5},"generated":{"line":45,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":47,"column":0}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":30,"column":11},"generated":{"line":47,"column":9}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":47,"column":14}},{"source":"parse/split-notation-track.ts","name":null,"original":{"line":31,"column":1},"generated":{"line":48,"column":0}}],"sources":{"parse/split-notation-track.ts":"import { NotationTrack } from \"./notation-track\";\nimport { getNearestNotationToTick } from \"./get-nearest-notation-to-tick\";\n\n/**\n * Split the notation track at split points\n *\n * NB. You can safely pass in a split point at the begining of a note -- it will be ignored\n */\nexport function splitNotationTrack(\n    track: NotationTrack,\n    split: number\n): NotationTrack {\n    const event = getNearestNotationToTick(split, track);\n\n    // check for undefined event and only split if split index it's not already the start of an event.\n    if (event && event.at !== split) {\n        track[event.at] = {\n            duration: split - event.at,\n            tones: [...event.entry.tones],\n            ties: event.entry.tones.map((tone) => tone.key),\n        };\n\n        track[split] = {\n            duration: event.at + event.entry.duration - split,\n            tones: [...event.entry.tones],\n            ties: [...event.entry.ties],\n        };\n    }\n\n    return track;\n}\n"},"lineCount":null}},"error":null,"hash":"53ee81f2dbdf89ce9763eba15d0d63a6","cacheData":{"env":{}}}
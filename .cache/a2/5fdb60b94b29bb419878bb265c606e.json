{"id":"Ocul","dependencies":[{"name":"/home/aled/solo-composer-ui/tsconfig.json","includedInParent":true,"mtime":1598401787877},{"name":"/home/aled/solo-composer-ui/package.json","includedInParent":true,"mtime":1598403412572},{"name":"shortid","loc":{"line":1,"column":20},"parent":"/home/aled/solo-composer-ui/src/store/score-instrument/utils.ts","resolved":"/home/aled/solo-composer-ui/node_modules/shortid/index.js"},{"name":"roman-numerals","loc":{"line":2,"column":24},"parent":"/home/aled/solo-composer-ui/src/store/score-instrument/utils.ts","resolved":"/home/aled/solo-composer-ui/node_modules/roman-numerals/index.js"},{"name":"./instrument-defs","loc":{"line":3,"column":31},"parent":"/home/aled/solo-composer-ui/src/store/score-instrument/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-instrument/instrument-defs.ts"},{"name":"../score-player/defs","loc":{"line":4,"column":27},"parent":"/home/aled/solo-composer-ui/src/store/score-instrument/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-player/defs.ts"},{"name":"../score-config/defs","loc":{"line":5,"column":31},"parent":"/home/aled/solo-composer-ui/src/store/score-instrument/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-config/defs.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.create_instrument=a,exports.get_def=i,exports.get_patches=s,exports.get_full_path_from_partial=f,exports.instrumentName=l,exports.getCounts=p;var e=u(require(\"shortid\")),t=require(\"roman-numerals\"),n=require(\"./instrument-defs\"),r=require(\"../score-player/defs\"),o=require(\"../score-config/defs\");function u(e){return e&&e.__esModule?e:{default:e}}function a(t){var n=i(t),r=n.type,o=n.long_name,u=n.short_name,a=n.staves;return{key:(0,e.default)(),id:t,type:r,long_name:o,short_name:u,staves:a.map(function(){return(0,e.default)()}),volume:80,mute:!1,solo:!1}}function i(e){return n.instrumentDefs.find(function(t){return t.id===e})}function s(e,t){return i(e).patches[t]}function f(e){var t=n.instrumentDefs.find(function(t){for(var n=0;n<e.length;n++)if(e[n]!==t.path[n])return!1;return!0});return{path:t.path,id:t.id}}function c(e,n){return void 0===n?\"\":e===o.AutoCountStyle.Roman?\" \"+(0,t.toRoman)(n):\" \"+n}function l(e,t,n){return e.long_name+c(t,n)}function p(e,t){var n=e.order.reduce(function(n,o){var u=e.by_key[o];return u.instruments.forEach(function(e){var o,a=t[e];n[a.long_name]||(n[a.long_name]=((o={})[r.PlayerType.Solo]=[],o[r.PlayerType.Section]=[],o)),n[a.long_name][u.type].push(a.key)}),n},{});return Object.keys(n).reduce(function(e,t){return n[t][r.PlayerType.Solo].forEach(function(t,n,r){r.length>1&&(e[t]=n+1)}),n[t][r.PlayerType.Solo].forEach(function(t,n,r){r.length>1&&(e[t]=n+1)}),e},{})}"},"sourceMaps":{"js":{"mappings":[{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":0}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":13}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":20}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":35}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":43}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":56}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":57}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":64}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":68}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":76}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":94}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":96}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":104}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":112}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":114}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":122}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":134}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":136}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":144}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":171}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":173}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":181}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":196}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":198}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":206}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":216}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":218}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":222}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":224}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":226}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":234}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":246}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":248}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":256}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":274}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":276}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":284}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":305}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":307}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":315}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":339}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":341}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":349}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":373}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":382}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":384}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":387}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":394}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":397}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":399}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":410}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":412}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":413}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":421}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":8,"column":6},"generated":{"line":1,"column":424}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":8,"column":16},"generated":{"line":1,"column":433}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":8,"column":34},"generated":{"line":1,"column":435}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":10},"generated":{"line":1,"column":438}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":10},"generated":{"line":1,"column":442}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":69},"generated":{"line":1,"column":444}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":10,"column":8},"generated":{"line":1,"column":446}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":18},"generated":{"line":1,"column":449}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":33},"generated":{"line":1,"column":451}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":33},"generated":{"line":1,"column":453}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":35},"generated":{"line":1,"column":458}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":44},"generated":{"line":1,"column":460}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":44},"generated":{"line":1,"column":462}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":46},"generated":{"line":1,"column":472}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":56},"generated":{"line":1,"column":474}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":56},"generated":{"line":1,"column":476}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":58},"generated":{"line":1,"column":487}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":64},"generated":{"line":1,"column":489}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":9,"column":64},"generated":{"line":1,"column":491}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":12,"column":11},"generated":{"line":1,"column":498}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":12,"column":11},"generated":{"line":1,"column":504}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":13,"column":8},"generated":{"line":1,"column":505}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":13,"column":13},"generated":{"line":1,"column":510}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":12,"column":11},"generated":{"line":1,"column":512}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":12,"column":11},"generated":{"line":1,"column":514}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":14,"column":8},"generated":{"line":1,"column":525}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":528}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":530}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":15,"column":14},"generated":{"line":1,"column":535}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":16,"column":8},"generated":{"line":1,"column":537}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":16,"column":17},"generated":{"line":1,"column":547}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":549}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":17,"column":18},"generated":{"line":1,"column":560}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":562}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":16},"generated":{"line":1,"column":569}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":23},"generated":{"line":1,"column":571}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":27},"generated":{"line":1,"column":575}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":33},"generated":{"line":1,"column":586}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":33},"generated":{"line":1,"column":593}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":33},"generated":{"line":1,"column":595}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":18,"column":33},"generated":{"line":1,"column":597}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":19,"column":8},"generated":{"line":1,"column":610}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":1,"column":617}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":620}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":20,"column":14},"generated":{"line":1,"column":626}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":628}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":21,"column":14},"generated":{"line":1,"column":634}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":637}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":646}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":25,"column":24},"generated":{"line":1,"column":648}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":11},"generated":{"line":1,"column":651}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":11},"generated":{"line":1,"column":658}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":26},"generated":{"line":1,"column":660}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":26},"generated":{"line":1,"column":675}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":31},"generated":{"line":1,"column":680}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":32},"generated":{"line":1,"column":689}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":40},"generated":{"line":1,"column":692}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":40},"generated":{"line":1,"column":699}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":44},"generated":{"line":1,"column":701}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":26,"column":51},"generated":{"line":1,"column":706}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":710}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":29,"column":16},"generated":{"line":1,"column":719}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":29,"column":28},"generated":{"line":1,"column":721}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":29,"column":40},"generated":{"line":1,"column":723}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":726}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":30,"column":16},"generated":{"line":1,"column":733}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":30,"column":24},"generated":{"line":1,"column":735}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":31,"column":15},"generated":{"line":1,"column":738}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":746}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":749}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":34,"column":16},"generated":{"line":1,"column":758}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":1,"column":760}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":763}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":767}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":37,"column":16},"generated":{"line":1,"column":769}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":37,"column":31},"generated":{"line":1,"column":771}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":37,"column":31},"generated":{"line":1,"column":786}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":37,"column":36},"generated":{"line":1,"column":791}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":37,"column":37},"generated":{"line":1,"column":800}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":1,"column":803}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":1,"column":807}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":17},"generated":{"line":1,"column":811}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":21},"generated":{"line":1,"column":813}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":24},"generated":{"line":1,"column":815}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":28},"generated":{"line":1,"column":817}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":819}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":38,"column":46},"generated":{"line":1,"column":826}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":830}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":833}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":39,"column":26},"generated":{"line":1,"column":835}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":39,"column":33},"generated":{"line":1,"column":840}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":39,"column":37},"generated":{"line":1,"column":842}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":39,"column":42},"generated":{"line":1,"column":847}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":41,"column":23},"generated":{"line":1,"column":850}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":41,"column":23},"generated":{"line":1,"column":857}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":45,"column":15},"generated":{"line":1,"column":859}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":45,"column":15},"generated":{"line":1,"column":866}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":48,"column":11},"generated":{"line":1,"column":870}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":48,"column":11},"generated":{"line":1,"column":876}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":49,"column":8},"generated":{"line":1,"column":877}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":1,"column":882}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":49,"column":18},"generated":{"line":1,"column":884}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":889}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":50,"column":12},"generated":{"line":1,"column":892}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":894}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":54,"column":0},"generated":{"line":1,"column":898}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":54,"column":9},"generated":{"line":1,"column":907}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":54,"column":25},"generated":{"line":1,"column":909}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":54,"column":48},"generated":{"line":1,"column":911}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":914}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":55,"column":18},"generated":{"line":1,"column":926}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":930}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":56,"column":15},"generated":{"line":1,"column":932}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":935}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":939}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":58,"column":37},"generated":{"line":1,"column":941}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":58,"column":37},"generated":{"line":1,"column":956}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":59,"column":19},"generated":{"line":1,"column":962}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":1,"column":967}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":59,"column":33},"generated":{"line":1,"column":969}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":59,"column":33},"generated":{"line":1,"column":971}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":59,"column":33},"generated":{"line":1,"column":980}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":61,"column":19},"generated":{"line":1,"column":983}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":61,"column":25},"generated":{"line":1,"column":987}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":66,"column":6},"generated":{"line":1,"column":989}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":66,"column":16},"generated":{"line":1,"column":998}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":67,"column":4},"generated":{"line":1,"column":1000}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":1002}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":1004}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":71,"column":11},"generated":{"line":1,"column":1007}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":71,"column":11},"generated":{"line":1,"column":1014}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":1,"column":1016}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":71,"column":34},"generated":{"line":1,"column":1026}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":71,"column":50},"generated":{"line":1,"column":1028}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":71,"column":63},"generated":{"line":1,"column":1030}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":83,"column":6},"generated":{"line":1,"column":1033}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":83,"column":16},"generated":{"line":1,"column":1042}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":84,"column":4},"generated":{"line":1,"column":1044}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":85,"column":4},"generated":{"line":1,"column":1046}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":87,"column":10},"generated":{"line":1,"column":1049}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":87,"column":10},"generated":{"line":1,"column":1053}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":87,"column":19},"generated":{"line":1,"column":1055}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":1,"column":1057}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":87,"column":33},"generated":{"line":1,"column":1063}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":1,"column":1070}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":88,"column":9},"generated":{"line":1,"column":1079}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":88,"column":17},"generated":{"line":1,"column":1081}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":89,"column":18},"generated":{"line":1,"column":1084}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":89,"column":18},"generated":{"line":1,"column":1088}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":89,"column":27},"generated":{"line":1,"column":1090}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":89,"column":35},"generated":{"line":1,"column":1092}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":89,"column":42},"generated":{"line":1,"column":1099}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":100,"column":19},"generated":{"line":1,"column":1102}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":90,"column":12},"generated":{"line":1,"column":1109}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":90,"column":19},"generated":{"line":1,"column":1111}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":90,"column":31},"generated":{"line":1,"column":1123}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":90,"column":39},"generated":{"line":1,"column":1131}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":90,"column":40},"generated":{"line":1,"column":1140}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":1143}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":120,"column":1},"generated":{"line":1,"column":1147}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":91,"column":22},"generated":{"line":1,"column":1149}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":91,"column":35},"generated":{"line":1,"column":1151}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":91,"column":47},"generated":{"line":1,"column":1153}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":92,"column":21},"generated":{"line":1,"column":1156}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":92,"column":28},"generated":{"line":1,"column":1158}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":92,"column":39},"generated":{"line":1,"column":1160}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":93,"column":20},"generated":{"line":1,"column":1173}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":93,"column":27},"generated":{"line":1,"column":1175}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":93,"column":38},"generated":{"line":1,"column":1177}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":93,"column":48},"generated":{"line":1,"column":1190}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":93,"column":48},"generated":{"line":1,"column":1192}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":94,"column":25},"generated":{"line":1,"column":1196}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":94,"column":36},"generated":{"line":1,"column":1198}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":94,"column":36},"generated":{"line":1,"column":1209}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":94,"column":43},"generated":{"line":1,"column":1215}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":95,"column":24},"generated":{"line":1,"column":1218}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":95,"column":25},"generated":{"line":1,"column":1220}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":95,"column":36},"generated":{"line":1,"column":1222}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":95,"column":36},"generated":{"line":1,"column":1233}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":95,"column":46},"generated":{"line":1,"column":1242}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":93,"column":20},"generated":{"line":1,"column":1245}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":16},"generated":{"line":1,"column":1249}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":23},"generated":{"line":1,"column":1251}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":34},"generated":{"line":1,"column":1253}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":45},"generated":{"line":1,"column":1264}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":52},"generated":{"line":1,"column":1266}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":58},"generated":{"line":1,"column":1272}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":63},"generated":{"line":1,"column":1277}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":98,"column":74},"generated":{"line":1,"column":1279}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":100,"column":19},"generated":{"line":1,"column":1286}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":102,"column":8},"generated":{"line":1,"column":1289}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":106,"column":11},"generated":{"line":1,"column":1293}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":105,"column":18},"generated":{"line":1,"column":1300}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":105,"column":25},"generated":{"line":1,"column":1307}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":105,"column":30},"generated":{"line":1,"column":1312}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":106,"column":17},"generated":{"line":1,"column":1315}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":106,"column":42},"generated":{"line":1,"column":1322}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":106,"column":43},"generated":{"line":1,"column":1331}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":106,"column":48},"generated":{"line":1,"column":1333}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":118,"column":15},"generated":{"line":1,"column":1336}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":8},"generated":{"line":1,"column":1343}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":15},"generated":{"line":1,"column":1345}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":21},"generated":{"line":1,"column":1348}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":32},"generated":{"line":1,"column":1350}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":32},"generated":{"line":1,"column":1361}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":38},"generated":{"line":1,"column":1367}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":46},"generated":{"line":1,"column":1375}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":47},"generated":{"line":1,"column":1384}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":62},"generated":{"line":1,"column":1386}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":107,"column":65},"generated":{"line":1,"column":1388}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":108,"column":16},"generated":{"line":1,"column":1391}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":108,"column":23},"generated":{"line":1,"column":1393}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":108,"column":32},"generated":{"line":1,"column":1400}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":109,"column":16},"generated":{"line":1,"column":1404}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":109,"column":20},"generated":{"line":1,"column":1406}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":109,"column":37},"generated":{"line":1,"column":1409}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":109,"column":41},"generated":{"line":1,"column":1411}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":8},"generated":{"line":1,"column":1416}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":15},"generated":{"line":1,"column":1418}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":21},"generated":{"line":1,"column":1421}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":32},"generated":{"line":1,"column":1423}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":32},"generated":{"line":1,"column":1434}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":38},"generated":{"line":1,"column":1440}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":46},"generated":{"line":1,"column":1448}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":47},"generated":{"line":1,"column":1457}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":62},"generated":{"line":1,"column":1459}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":113,"column":65},"generated":{"line":1,"column":1461}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":114,"column":16},"generated":{"line":1,"column":1464}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":114,"column":23},"generated":{"line":1,"column":1466}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":114,"column":32},"generated":{"line":1,"column":1473}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":115,"column":16},"generated":{"line":1,"column":1477}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":115,"column":20},"generated":{"line":1,"column":1479}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":115,"column":37},"generated":{"line":1,"column":1482}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":115,"column":41},"generated":{"line":1,"column":1484}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":118,"column":15},"generated":{"line":1,"column":1489}},{"source":"store/score-instrument/utils.ts","name":null,"original":{"line":119,"column":7},"generated":{"line":1,"column":1492}}],"sources":{"store/score-instrument/utils.ts":"import shortid from \"shortid\";\nimport { toRoman } from \"roman-numerals\";\nimport { Instrument } from \"./defs\";\nimport { instrumentDefs } from \"./instrument-defs\";\nimport { PlayerType, Player } from \"../score-player/defs\";\nimport { AutoCountStyle } from \"../score-config/defs\";\n\nexport function create_instrument(id: string): Instrument {\n    const { type: instrument_type, long_name, short_name, staves } = get_def(\n        id\n    );\n    return {\n        key: shortid(),\n        id,\n        type: instrument_type,\n        long_name,\n        short_name,\n        staves: staves.map(() => shortid()),\n        volume: 80,\n        mute: false,\n        solo: false,\n    };\n}\n\nexport function get_def(id: string) {\n    return instrumentDefs.find((def) => def.id === id);\n}\n\nexport function get_patches(id: string, player_type: PlayerType) {\n    const def = get_def(id);\n    return def.patches[player_type];\n}\n\nexport function get_full_path_from_partial(\n    selection: string[]\n): { path: string[]; id: string } {\n    const def = instrumentDefs.find((def) => {\n        for (let i = 0; i < selection.length; i++) {\n            if (selection[i] !== def.path[i]) {\n                // we have a mis-match\n                return false;\n            }\n        }\n        // we have run out of selection so the first def is the one we want even if partial\n        return true;\n    });\n\n    return {\n        path: def.path,\n        id: def.id,\n    };\n}\n\nfunction count_to_string(style: AutoCountStyle, count?: number) {\n    if (count === undefined) {\n        return \"\";\n    } else {\n        if (style === AutoCountStyle.Roman) {\n            return \" \" + toRoman(count);\n        } else {\n            return \" \" + count;\n        }\n    }\n}\n\nexport function instrumentName(\n    instrument: Instrument,\n    count_style: AutoCountStyle,\n    count?: number\n) {\n    return instrument.long_name + count_to_string(count_style, count);\n}\n\ninterface InstrumentCountsTotals {\n    [name: string]: {\n        [PlayerType.Solo]: string[];\n        [PlayerType.Section]: string[];\n    };\n}\n\nexport type InstrumentCounts = { [instrumentKey: string]: number };\n\nexport function getCounts(\n    players: { order: string[]; by_key: { [key: string]: Player } },\n    instruments: { [key: string]: Instrument }\n) {\n    const counts = players.order.reduce<InstrumentCountsTotals>(\n        (output, playerKey) => {\n            const player = players.by_key[playerKey];\n            player.instruments.forEach((instrumentKey) => {\n                const instrument = instruments[instrumentKey];\n                if (!output[instrument.long_name]) {\n                    output[instrument.long_name] = {\n                        [PlayerType.Solo]: [],\n                        [PlayerType.Section]: [],\n                    };\n                }\n                output[instrument.long_name][player.type].push(instrument.key);\n            });\n            return output;\n        },\n        {}\n    );\n\n    const names = Object.keys(counts);\n    return names.reduce<InstrumentCounts>((out, name) => {\n        counts[name][PlayerType.Solo].forEach((instrumentKey, i, _names) => {\n            if (_names.length > 1) {\n                out[instrumentKey] = i + 1;\n            }\n        });\n\n        counts[name][PlayerType.Solo].forEach((instrumentKey, i, _names) => {\n            if (_names.length > 1) {\n                out[instrumentKey] = i + 1;\n            }\n        });\n        return out;\n    }, {});\n}\n"},"lineCount":null}},"error":null,"hash":"a1bca1c5c4a2ec77e381a3c95ade14aa","cacheData":{"env":{}}}
{"id":"xdt2","dependencies":[{"name":"/home/aled/solo-composer-ui/tsconfig.json","includedInParent":true,"mtime":1598401787877},{"name":"/home/aled/solo-composer-ui/package.json","includedInParent":true,"mtime":1598403412572},{"name":"shortid","loc":{"line":1,"column":20},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts","resolved":"/home/aled/solo-composer-ui/node_modules/shortid/index.js"},{"name":"../score-track/utils","loc":{"line":2,"column":43},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-track/utils.ts"},{"name":"../entries/time_signature/utils","loc":{"line":3,"column":122},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/entries/time_signature/utils.ts"},{"name":"../entries","loc":{"line":4,"column":40},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/entries/index.ts"},{"name":"../entries/time_signature/defs","loc":{"line":5,"column":39},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/entries/time_signature/defs.ts"},{"name":"../use-store","loc":{"line":6,"column":25},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts","resolved":"/home/aled/solo-composer-ui/src/store/use-store.ts"},{"name":"react","loc":{"line":7,"column":24},"parent":"/home/aled/solo-composer-ui/src/store/score-flow/utils.ts","resolved":"/home/aled/solo-composer-ui/node_modules/react/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.create_flow=a,exports.useTicks=_;var e=o(require(\"shortid\")),t=require(\"../score-track/utils\"),r=require(\"../entries/time_signature/utils\"),i=require(\"../entries\"),s=require(\"../entries/time_signature/defs\"),n=require(\"../use-store\"),u=require(\"react\");function o(e){return e&&e.__esModule?e:{default:e}}function a(){var n=(0,r.create_time_signature)(0,4,i.NoteDuration.Quarter,s.TimeSignatureDrawType.Normal),u=(0,t.create_track)();return(0,t.insert_entry)(u,n),{key:(0,e.default)(),title:\"\",players:{},length:256,subdivisions:16,master:u,staves:{}}}function _(e){var t=(0,n.useStore)(function(t){return[t.score.flows.by_key[e].length,t.score.flows.by_key[e].subdivisions,t.score.flows.by_key[e].master]},[e]),s=t[0],o=t[1],a=t[2];return(0,u.useMemo)(function(){for(var e={list:[],width:0},t=null,n=0;n<s;n++){var u=(a.entries.by_tick[n]||[]).map(function(e){return a.entries.by_key[e]}).filter(function(e){return e.type===i.EntryType.TimeSignature});u.length>0&&(t=u[0]);var _=(0,r.duration_to_ticks)(i.NoteDuration.Quarter,o),c=(0,r.distance_from_barline)(n,o,t),l=72/_;e.list.push({tick:n,x:e.width,width:l,is_beat:(0,r.is_on_beat_type)(n,o,t,t.beat_type),is_first_beat:0===c,is_quaver_beat:(0,r.is_on_beat_type)(n,o,t,i.NoteDuration.Eighth),is_grouping_boundry:(0,r.is_on_grouping_boundry)(n,o,t)}),e.width=e.width+l}return e},[s,o,a])}"},"sourceMaps":{"js":{"mappings":[{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":0}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":13}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":20}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":35}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":43}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":56}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":57}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":64}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":68}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":76}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":88}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":90}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":98}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":107}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":109}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":113}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":115}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":117}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":125}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":137}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":139}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":147}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":171}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":173}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":181}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":216}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":218}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":226}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":240}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":242}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":250}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":284}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":286}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":294}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":310}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":312}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":320}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":329}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":338}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":340}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":343}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":350}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":353}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":355}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":366}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":368}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":369}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":110,"column":1},"generated":{"line":1,"column":377}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":19,"column":6},"generated":{"line":1,"column":380}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":1,"column":389}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":20,"column":10},"generated":{"line":1,"column":393}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":20,"column":10},"generated":{"line":1,"column":397}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":20,"column":27},"generated":{"line":1,"column":400}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":402}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":404}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":427}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":429}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":431}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":433}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":446}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":454}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":24,"column":30},"generated":{"line":1,"column":456}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":24,"column":30},"generated":{"line":1,"column":478}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":1,"column":486}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":26,"column":19},"generated":{"line":1,"column":489}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":491}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":493}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":509}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":516}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":518}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":520}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":534}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":27,"column":25},"generated":{"line":1,"column":536}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":539}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":540}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":1,"column":545}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":547}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":549}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":560}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":30,"column":15},"generated":{"line":1,"column":566}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":1,"column":569}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":1,"column":577}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":580}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":32,"column":16},"generated":{"line":1,"column":587}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":591}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":33,"column":22},"generated":{"line":1,"column":604}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":1,"column":607}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":35,"column":14},"generated":{"line":1,"column":614}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":616}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":1,"column":623}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":40,"column":6},"generated":{"line":1,"column":627}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":1,"column":636}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":40,"column":25},"generated":{"line":1,"column":638}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":10},"generated":{"line":1,"column":641}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":10},"generated":{"line":1,"column":645}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":43},"generated":{"line":1,"column":648}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":650}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":652}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":662}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":42,"column":9},"generated":{"line":1,"column":671}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":42,"column":15},"generated":{"line":1,"column":674}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":42,"column":15},"generated":{"line":1,"column":680}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":43,"column":12},"generated":{"line":1,"column":681}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":43,"column":14},"generated":{"line":1,"column":683}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":43,"column":20},"generated":{"line":1,"column":689}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":1,"column":695}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":43,"column":33},"generated":{"line":1,"column":702}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":43,"column":43},"generated":{"line":1,"column":705}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":44,"column":12},"generated":{"line":1,"column":712}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":44,"column":14},"generated":{"line":1,"column":714}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":44,"column":20},"generated":{"line":1,"column":720}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":44,"column":26},"generated":{"line":1,"column":726}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":733}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":44,"column":43},"generated":{"line":1,"column":736}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":45,"column":12},"generated":{"line":1,"column":749}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":45,"column":14},"generated":{"line":1,"column":751}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":45,"column":20},"generated":{"line":1,"column":757}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":45,"column":26},"generated":{"line":1,"column":763}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":770}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":45,"column":43},"generated":{"line":1,"column":773}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":782}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":783}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":11},"generated":{"line":1,"column":787}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":17},"generated":{"line":1,"column":789}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":17},"generated":{"line":1,"column":791}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":19},"generated":{"line":1,"column":794}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":1,"column":796}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":1,"column":798}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":33},"generated":{"line":1,"column":801}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":39},"generated":{"line":1,"column":803}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":41,"column":39},"generated":{"line":1,"column":805}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":808}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":815}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":50,"column":19},"generated":{"line":1,"column":817}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":50,"column":19},"generated":{"line":1,"column":819}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":50,"column":19},"generated":{"line":1,"column":828}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":59,"column":13},"generated":{"line":1,"column":839}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":51,"column":14},"generated":{"line":1,"column":843}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":52,"column":14},"generated":{"line":1,"column":847}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":52,"column":32},"generated":{"line":1,"column":849}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":53,"column":12},"generated":{"line":1,"column":850}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":53,"column":18},"generated":{"line":1,"column":855}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":858}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":54,"column":19},"generated":{"line":1,"column":864}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":867}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":57,"column":44},"generated":{"line":1,"column":869}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":874}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":1,"column":876}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":59,"column":27},"generated":{"line":1,"column":878}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":59,"column":34},"generated":{"line":1,"column":880}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":59,"column":42},"generated":{"line":1,"column":882}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":59,"column":50},"generated":{"line":1,"column":886}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":60,"column":18},"generated":{"line":1,"column":887}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":61,"column":18},"generated":{"line":1,"column":891}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":60,"column":28},"generated":{"line":1,"column":894}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":60,"column":35},"generated":{"line":1,"column":896}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":60,"column":43},"generated":{"line":1,"column":904}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":60,"column":51},"generated":{"line":1,"column":912}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":60,"column":60},"generated":{"line":1,"column":916}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":17},"generated":{"line":1,"column":920}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":924}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":22},"generated":{"line":1,"column":933}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":37},"generated":{"line":1,"column":936}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":37},"generated":{"line":1,"column":943}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":44},"generated":{"line":1,"column":945}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":52},"generated":{"line":1,"column":953}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":62,"column":59},"generated":{"line":1,"column":960}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":17},"generated":{"line":1,"column":965}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":24},"generated":{"line":1,"column":972}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":25},"generated":{"line":1,"column":981}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":35},"generated":{"line":1,"column":984}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":35},"generated":{"line":1,"column":991}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":41},"generated":{"line":1,"column":993}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":50},"generated":{"line":1,"column":1000}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":60},"generated":{"line":1,"column":1002}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":63,"column":60},"generated":{"line":1,"column":1012}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":65,"column":16},"generated":{"line":1,"column":1028}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":65,"column":23},"generated":{"line":1,"column":1030}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":65,"column":32},"generated":{"line":1,"column":1037}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":66,"column":16},"generated":{"line":1,"column":1041}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":66,"column":33},"generated":{"line":1,"column":1043}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":66,"column":40},"generated":{"line":1,"column":1045}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":69,"column":16},"generated":{"line":1,"column":1049}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":69,"column":16},"generated":{"line":1,"column":1053}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":69,"column":36},"generated":{"line":1,"column":1056}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":70,"column":16},"generated":{"line":1,"column":1058}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":70,"column":16},"generated":{"line":1,"column":1060}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":70,"column":16},"generated":{"line":1,"column":1079}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":70,"column":29},"generated":{"line":1,"column":1081}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":70,"column":29},"generated":{"line":1,"column":1094}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":71,"column":16},"generated":{"line":1,"column":1102}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":73,"column":16},"generated":{"line":1,"column":1105}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":73,"column":27},"generated":{"line":1,"column":1108}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":1110}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":1112}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":1135}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":75,"column":16},"generated":{"line":1,"column":1137}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":76,"column":16},"generated":{"line":1,"column":1139}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":79,"column":18},"generated":{"line":1,"column":1142}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":51,"column":30},"generated":{"line":1,"column":1144}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":79,"column":47},"generated":{"line":1,"column":1147}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":1149}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":81,"column":18},"generated":{"line":1,"column":1151}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":81,"column":23},"generated":{"line":1,"column":1156}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":81,"column":28},"generated":{"line":1,"column":1161}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":82,"column":16},"generated":{"line":1,"column":1162}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":82,"column":20},"generated":{"line":1,"column":1167}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":83,"column":16},"generated":{"line":1,"column":1169}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":83,"column":19},"generated":{"line":1,"column":1171}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":83,"column":25},"generated":{"line":1,"column":1173}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":84,"column":16},"generated":{"line":1,"column":1179}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":84,"column":23},"generated":{"line":1,"column":1185}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":85,"column":16},"generated":{"line":1,"column":1187}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":85,"column":25},"generated":{"line":1,"column":1196}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":86,"column":20},"generated":{"line":1,"column":1198}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":86,"column":20},"generated":{"line":1,"column":1200}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":86,"column":20},"generated":{"line":1,"column":1217}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":87,"column":20},"generated":{"line":1,"column":1219}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":88,"column":20},"generated":{"line":1,"column":1221}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":89,"column":20},"generated":{"line":1,"column":1223}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":89,"column":35},"generated":{"line":1,"column":1225}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":91,"column":16},"generated":{"line":1,"column":1236}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":91,"column":44},"generated":{"line":1,"column":1250}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":91,"column":31},"generated":{"line":1,"column":1254}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":92,"column":16},"generated":{"line":1,"column":1256}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":92,"column":32},"generated":{"line":1,"column":1272}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":93,"column":20},"generated":{"line":1,"column":1274}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":93,"column":20},"generated":{"line":1,"column":1276}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":93,"column":20},"generated":{"line":1,"column":1293}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":94,"column":20},"generated":{"line":1,"column":1295}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":1,"column":1297}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":96,"column":20},"generated":{"line":1,"column":1299}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":96,"column":33},"generated":{"line":1,"column":1301}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":96,"column":33},"generated":{"line":1,"column":1314}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":98,"column":16},"generated":{"line":1,"column":1322}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":98,"column":37},"generated":{"line":1,"column":1343}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":99,"column":20},"generated":{"line":1,"column":1345}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":99,"column":20},"generated":{"line":1,"column":1347}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":99,"column":20},"generated":{"line":1,"column":1371}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":100,"column":20},"generated":{"line":1,"column":1373}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":101,"column":20},"generated":{"line":1,"column":1375}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":105,"column":12},"generated":{"line":1,"column":1380}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":105,"column":18},"generated":{"line":1,"column":1382}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":105,"column":26},"generated":{"line":1,"column":1388}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":105,"column":32},"generated":{"line":1,"column":1390}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":105,"column":40},"generated":{"line":1,"column":1396}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":108,"column":15},"generated":{"line":1,"column":1398}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":108,"column":15},"generated":{"line":1,"column":1405}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":109,"column":7},"generated":{"line":1,"column":1408}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":109,"column":8},"generated":{"line":1,"column":1409}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":109,"column":16},"generated":{"line":1,"column":1411}},{"source":"store/score-flow/utils.ts","name":null,"original":{"line":109,"column":30},"generated":{"line":1,"column":1413}}],"sources":{"store/score-flow/utils.ts":"import shortid from \"shortid\";\nimport { Flow, TickList } from \"./defs\";\nimport { create_track, insert_entry } from \"../score-track/utils\";\nimport {\n    create_time_signature,\n    duration_to_ticks,\n    distance_from_barline,\n    is_on_beat_type,\n    is_on_grouping_boundry,\n} from \"../entries/time_signature/utils\";\nimport { NoteDuration, Entry, EntryType } from \"../entries\";\nimport {\n    TimeSignatureDrawType,\n    TimeSignature,\n} from \"../entries/time_signature/defs\";\nimport { useStore } from \"../use-store\";\nimport { useMemo } from \"react\";\n\nexport function create_flow(): Flow {\n    const time_signature = create_time_signature(\n        0,\n        4,\n        NoteDuration.Quarter,\n        TimeSignatureDrawType.Normal\n    );\n    const master = create_track();\n    insert_entry(master, time_signature);\n    return {\n        key: shortid(),\n        title: \"\",\n        players: {},\n        length: 16 * 4 * 4,\n        subdivisions: 16,\n\n        master,\n        staves: {},\n    };\n}\n\nexport function useTicks(flow_key: string): TickList {\n    const [length, subdivisions, master] = useStore(\n        (s) => [\n            s.score.flows.by_key[flow_key].length,\n            s.score.flows.by_key[flow_key].subdivisions,\n            s.score.flows.by_key[flow_key].master,\n        ],\n        [flow_key]\n    );\n\n    return useMemo(() => {\n        const quarter_width = 72.0;\n        const ticks: TickList = {\n            list: [],\n            width: 0,\n        };\n\n        let time_signature: TimeSignature = null;\n\n        for (let tick = 0; tick < length; tick++) {\n            const entries = master.entries.by_tick[tick] || [];\n            const result = entries\n                .map((key): Entry => master.entries.by_key[key])\n                .filter((entry) => entry.type === EntryType.TimeSignature);\n\n            if (result.length > 0) {\n                time_signature = result[0] as TimeSignature;\n            }\n\n            let ticks_per_quarter = duration_to_ticks(\n                NoteDuration.Quarter,\n                subdivisions\n            );\n            let distance = distance_from_barline(\n                tick,\n                subdivisions,\n                time_signature\n            );\n\n            const tick_width = quarter_width / ticks_per_quarter;\n\n            ticks.list.push({\n                tick,\n                x: ticks.width,\n                width: tick_width,\n                is_beat: is_on_beat_type(\n                    tick,\n                    subdivisions,\n                    time_signature,\n                    time_signature.beat_type\n                ),\n                is_first_beat: distance === 0,\n                is_quaver_beat: is_on_beat_type(\n                    tick,\n                    subdivisions,\n                    time_signature,\n                    NoteDuration.Eighth\n                ),\n                is_grouping_boundry: is_on_grouping_boundry(\n                    tick,\n                    subdivisions,\n                    time_signature\n                ),\n            });\n\n            ticks.width = ticks.width + tick_width;\n        }\n\n        return ticks;\n    }, [length, subdivisions, master]);\n}\n"},"lineCount":null}},"error":null,"hash":"e6766540e455af2523c49825c368b069","cacheData":{"env":{}}}
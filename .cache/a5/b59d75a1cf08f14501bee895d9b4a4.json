{"id":"KD6F","dependencies":[{"name":"/home/aled/solo-composer-ui/tsconfig.json","includedInParent":true,"mtime":1598401787877},{"name":"/home/aled/solo-composer-ui/package.json","includedInParent":true,"mtime":1598403412572},{"name":"../../score-track/utils","loc":{"line":1,"column":56},"parent":"/home/aled/solo-composer-ui/src/store/entries/tone/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/score-track/utils.ts"},{"name":"../../use-store","loc":{"line":2,"column":22},"parent":"/home/aled/solo-composer-ui/src/store/entries/tone/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/use-store.ts"},{"name":"./utils","loc":{"line":3,"column":28},"parent":"/home/aled/solo-composer-ui/src/store/entries/tone/actions.ts","resolved":"/home/aled/solo-composer-ui/src/store/entries/tone/utils.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.toneActions=void 0;var e=require(\"../../score-track/utils\"),t=require(\"../../use-store\"),r=require(\"./utils\"),s={create:function(s,o,n,c,i,a,y,u){var k=(0,r.create_tone)(c,i,a,y,u);return t.store.update(function(t,r){(0,e.insert_entry)(t.score.flows.by_key[s].staves[o].tracks.by_key[n],k)}),k.key},update:function(r,s,o,n,c,i,a,y){t.store.update(function(t){(0,e.move_entry)(t.score.flows.by_key[r].staves[s].tracks.by_key[o],n,c);var u=t.score.flows.by_key[r].staves[s].tracks.by_key[o].entries.by_key[n];u.duration=i,u.pitch=a,u.articulation=y})},slice:function(s,o,n,c,i){t.store.update(function(t,a){var y=t.score.flows.by_key[s].staves[o].tracks.by_key[n],u=y.entries.by_key[c],k=(0,r.create_tone)(i,u.duration-(i-u.tick),u.pitch,u.velocity,u.articulation);(0,e.insert_entry)(y,k),u.duration=i-u.tick})},remove:function(r,s,o,n){t.store.update(function(t){(0,e.remove_entry)(t.score.flows.by_key[r].staves[s].tracks.by_key[o],n)})}};exports.toneActions=s;"},"sourceMaps":{"js":{"mappings":[{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":0}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":13}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":20}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":35}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":43}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":56}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":57}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":64}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":68}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":76}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":93}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":101}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":109}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":136}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":138}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":146}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":165}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":167}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":175}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":13},"generated":{"line":1,"column":186}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":27},"generated":{"line":1,"column":188}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":189}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":17,"column":12},"generated":{"line":1,"column":196}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":205}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":19,"column":8},"generated":{"line":1,"column":207}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":209}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":211}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":213}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":215}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":217}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":219}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":14},"generated":{"line":1,"column":222}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":14},"generated":{"line":1,"column":226}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":1,"column":229}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":33},"generated":{"line":1,"column":231}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":33},"generated":{"line":1,"column":233}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":33},"generated":{"line":1,"column":246}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":39},"generated":{"line":1,"column":248}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":49},"generated":{"line":1,"column":250}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":56},"generated":{"line":1,"column":252}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":27,"column":66},"generated":{"line":1,"column":254}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":37,"column":15},"generated":{"line":1,"column":257}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":29,"column":14},"generated":{"line":1,"column":264}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":29,"column":14},"generated":{"line":1,"column":266}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":29,"column":14},"generated":{"line":1,"column":272}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":29,"column":21},"generated":{"line":1,"column":279}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":29,"column":22},"generated":{"line":1,"column":288}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":29,"column":29},"generated":{"line":1,"column":290}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":294}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":296}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":298}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":312}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":22},"generated":{"line":1,"column":314}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":28},"generated":{"line":1,"column":320}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":34},"generated":{"line":1,"column":326}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":41},"generated":{"line":1,"column":333}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":51},"generated":{"line":1,"column":336}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":58},"generated":{"line":1,"column":343}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":31,"column":69},"generated":{"line":1,"column":346}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":32,"column":21},"generated":{"line":1,"column":353}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":32,"column":28},"generated":{"line":1,"column":360}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":33,"column":16},"generated":{"line":1,"column":363}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":37,"column":15},"generated":{"line":1,"column":368}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":37,"column":20},"generated":{"line":1,"column":370}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":375}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":382}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":391}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":1,"column":393}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":395}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":397}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":399}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":401}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":403}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":405}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":1,"column":408}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":1,"column":410}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":1,"column":416}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":49,"column":21},"generated":{"line":1,"column":423}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":49,"column":22},"generated":{"line":1,"column":432}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":436}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":438}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":440}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":452}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":22},"generated":{"line":1,"column":454}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":28},"generated":{"line":1,"column":460}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":34},"generated":{"line":1,"column":466}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":41},"generated":{"line":1,"column":473}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":51},"generated":{"line":1,"column":476}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":58},"generated":{"line":1,"column":483}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":51,"column":69},"generated":{"line":1,"column":486}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":493}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":52,"column":28},"generated":{"line":1,"column":500}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":53,"column":16},"generated":{"line":1,"column":503}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":505}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":1,"column":508}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":1,"column":512}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":514}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":1,"column":516}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":37},"generated":{"line":1,"column":522}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":43},"generated":{"line":1,"column":528}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":50},"generated":{"line":1,"column":535}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":60},"generated":{"line":1,"column":538}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":56,"column":67},"generated":{"line":1,"column":545}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":57,"column":17},"generated":{"line":1,"column":548}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":57,"column":24},"generated":{"line":1,"column":555}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":57,"column":31},"generated":{"line":1,"column":562}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":57,"column":42},"generated":{"line":1,"column":565}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":57,"column":50},"generated":{"line":1,"column":573}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":57,"column":57},"generated":{"line":1,"column":580}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":583}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":58,"column":17},"generated":{"line":1,"column":585}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":58,"column":28},"generated":{"line":1,"column":594}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":59,"column":12},"generated":{"line":1,"column":596}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":598}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":1,"column":604}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":60,"column":12},"generated":{"line":1,"column":606}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":60,"column":17},"generated":{"line":1,"column":608}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":60,"column":32},"generated":{"line":1,"column":621}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":63,"column":4},"generated":{"line":1,"column":626}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":63,"column":11},"generated":{"line":1,"column":632}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":641}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":643}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":645}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":647}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":68,"column":8},"generated":{"line":1,"column":649}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":652}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":654}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":660}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":70,"column":21},"generated":{"line":1,"column":667}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":70,"column":22},"generated":{"line":1,"column":676}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":70,"column":29},"generated":{"line":1,"column":678}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":71,"column":18},"generated":{"line":1,"column":681}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":71,"column":18},"generated":{"line":1,"column":685}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":16},"generated":{"line":1,"column":687}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":22},"generated":{"line":1,"column":689}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":28},"generated":{"line":1,"column":695}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":34},"generated":{"line":1,"column":701}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":41},"generated":{"line":1,"column":708}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":51},"generated":{"line":1,"column":711}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":58},"generated":{"line":1,"column":718}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":72,"column":69},"generated":{"line":1,"column":721}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":73,"column":21},"generated":{"line":1,"column":728}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":73,"column":28},"generated":{"line":1,"column":735}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":74,"column":18},"generated":{"line":1,"column":738}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":74,"column":29},"generated":{"line":1,"column":740}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":74,"column":35},"generated":{"line":1,"column":742}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":74,"column":43},"generated":{"line":1,"column":750}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":74,"column":50},"generated":{"line":1,"column":757}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":75,"column":18},"generated":{"line":1,"column":760}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":763}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":76,"column":16},"generated":{"line":1,"column":765}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":76,"column":16},"generated":{"line":1,"column":767}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":76,"column":16},"generated":{"line":1,"column":780}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":77,"column":16},"generated":{"line":1,"column":782}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":77,"column":25},"generated":{"line":1,"column":784}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":77,"column":37},"generated":{"line":1,"column":794}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":77,"column":48},"generated":{"line":1,"column":796}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":77,"column":57},"generated":{"line":1,"column":798}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":78,"column":16},"generated":{"line":1,"column":804}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":78,"column":25},"generated":{"line":1,"column":806}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":79,"column":16},"generated":{"line":1,"column":812}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":814}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":80,"column":16},"generated":{"line":1,"column":823}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":80,"column":25},"generated":{"line":1,"column":825}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":1,"column":840}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":1,"column":842}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":1,"column":844}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":1,"column":858}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":82,"column":32},"generated":{"line":1,"column":860}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":83,"column":12},"generated":{"line":1,"column":863}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":83,"column":21},"generated":{"line":1,"column":865}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":83,"column":32},"generated":{"line":1,"column":874}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":83,"column":43},"generated":{"line":1,"column":876}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":83,"column":52},"generated":{"line":1,"column":878}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":86,"column":4},"generated":{"line":1,"column":886}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":86,"column":12},"generated":{"line":1,"column":893}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":1,"column":902}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":1,"column":904}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":1,"column":906}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":90,"column":8},"generated":{"line":1,"column":908}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":92,"column":14},"generated":{"line":1,"column":911}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":92,"column":14},"generated":{"line":1,"column":913}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":92,"column":14},"generated":{"line":1,"column":919}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":92,"column":21},"generated":{"line":1,"column":926}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":92,"column":22},"generated":{"line":1,"column":935}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":16},"generated":{"line":1,"column":939}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":16},"generated":{"line":1,"column":941}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":16},"generated":{"line":1,"column":943}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":16},"generated":{"line":1,"column":957}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":22},"generated":{"line":1,"column":959}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":28},"generated":{"line":1,"column":965}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":34},"generated":{"line":1,"column":971}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":41},"generated":{"line":1,"column":978}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":51},"generated":{"line":1,"column":981}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":58},"generated":{"line":1,"column":988}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":94,"column":69},"generated":{"line":1,"column":991}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":95,"column":21},"generated":{"line":1,"column":998}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":95,"column":28},"generated":{"line":1,"column":1005}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":96,"column":16},"generated":{"line":1,"column":1008}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":1015}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":1023}},{"source":"store/entries/tone/actions.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":1035}}],"sources":{"store/entries/tone/actions.ts":"import {\n    remove_entry,\n    insert_entry,\n    move_entry,\n} from \"../../score-track/utils\";\nimport { store } from \"../../use-store\";\nimport { create_tone } from \"./utils\";\nimport { Tone } from \"./defs\";\nimport { Pitch, Articulation } from \"..\";\n\nexport const toneActions = {\n    /**\n     * Create a new tone.\n     *\n     * With MIDI pitches, tick counts and velocity 0-127\n     */\n    create: (\n        flow_key: string,\n        stave_key: string,\n        track_key: string,\n        tick: number,\n        duration: number,\n        pitch: Pitch,\n        velocity: number,\n        articulation: Articulation\n    ): string => {\n        const tone = create_tone(tick, duration, pitch, velocity, articulation);\n\n        store.update((draft, state) => {\n            insert_entry(\n                draft.score.flows.by_key[flow_key].staves[stave_key].tracks\n                    .by_key[track_key],\n                tone\n            );\n        });\n\n        return tone.key;\n    },\n    update: (\n        flow_key: string,\n        stave_key: string,\n        track_key: string,\n        entry_key: string,\n        tick: number,\n        duration: number,\n        pitch: Pitch,\n        articulation: Articulation\n    ) => {\n        store.update((draft) => {\n            move_entry(\n                draft.score.flows.by_key[flow_key].staves[stave_key].tracks\n                    .by_key[track_key],\n                entry_key,\n                tick\n            );\n            const tone = draft.score.flows.by_key[flow_key].staves[stave_key]\n                .tracks.by_key[track_key].entries.by_key[entry_key] as Tone;\n            tone.duration = duration;\n            tone.pitch = pitch;\n            tone.articulation = articulation;\n        });\n    },\n    slice: (\n        flow_key: string,\n        stave_key: string,\n        track_key: string,\n        entry_key: string,\n        slice_at: number\n    ) => {\n        store.update((draft, state) => {\n            const track =\n                draft.score.flows.by_key[flow_key].staves[stave_key].tracks\n                    .by_key[track_key];\n            const old_tone = track.entries.by_key[entry_key] as Tone;\n            const new_tone = create_tone(\n                slice_at,\n                old_tone.duration - (slice_at - old_tone.tick),\n                old_tone.pitch,\n                old_tone.velocity,\n                old_tone.articulation\n            );\n            insert_entry(track, new_tone);\n            old_tone.duration = slice_at - old_tone.tick;\n        });\n    },\n    remove: (\n        flow_key: string,\n        stave_key: string,\n        track_key: string,\n        entry_key: string\n    ) => {\n        store.update((draft) => {\n            remove_entry(\n                draft.score.flows.by_key[flow_key].staves[stave_key].tracks\n                    .by_key[track_key],\n                entry_key\n            );\n        });\n    },\n};\n"},"lineCount":null}},"error":null,"hash":"4a09b90b035c0a65e558e85895d46227","cacheData":{"env":{}}}
{"id":"JQpL","dependencies":[{"name":"/home/aled/solo-composer-ui/tsconfig.json","includedInParent":true,"mtime":1598401787877},{"name":"/home/aled/solo-composer-ui/package.json","includedInParent":true,"mtime":1598403412572},{"name":"../store/entries/brackets","loc":{"line":1,"column":32},"parent":"/home/aled/solo-composer-ui/src/parse/draw-brackets.ts","resolved":"/home/aled/solo-composer-ui/src/store/entries/brackets.ts"},{"name":"../render/path","loc":{"line":2,"column":26},"parent":"/home/aled/solo-composer-ui/src/parse/draw-brackets.ts","resolved":"/home/aled/solo-composer-ui/src/render/path.ts"},{"name":"../render/text","loc":{"line":3,"column":42},"parent":"/home/aled/solo-composer-ui/src/parse/draw-brackets.ts","resolved":"/home/aled/solo-composer-ui/src/render/text.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.drawBrackets=a;var t=require(\"../store/entries/brackets\"),e=require(\"../render/path\"),r=require(\"../render/text\");function a(a,s,i,n,u){var o=a-.75,c={color:\"#000000\",thickness:.5},l={color:\"#000000\",thickness:.125};return n.brackets.reduce(function(n,d){if(!u.bracketSingleStaves&&d.start===d.stop)return n;var b=i.instruments[d.start],p=i.instruments[d.stop],h=u.bracketEndStyle===t.BracketEndStyle.Wing,k=u.bracketEndStyle===t.BracketEndStyle.Line,y=h?.3125:0,f=s+b.y-y,v=s+p.y+p.height+y;if(n.push((0,e.buildPath)(d.start+\"-vertical-bar\",c,[o,f-.0625],[o,v+.0625])),k&&n.push((0,e.buildPath)(d.start+\"-cap--top\",l,[o-.25,f],[a,f]),(0,e.buildPath)(d.start+\"-cap--bottom\",l,[o-.25,v],[a,v])),h){var g=a-1,S={color:\"#000000\",justify:r.Justify.Start,align:r.Align.Middle,font:\"Bravura\",size:4};n.push((0,r.buildText)(d.start+\"-wing--top\",S,g,f,\"\"),(0,r.buildText)(d.start+\"-wing--bottom\",S,g,v,\"\"))}return n},[])}"},"sourceMaps":{"js":{"mappings":[{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":0}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":13}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":20}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":35}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":43}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":56}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":57}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":64}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":68}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":76}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":1,"column":89}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":91}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":95}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":97}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":105}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":134}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":136}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":144}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":162}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":164}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":172}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":9,"column":6},"generated":{"line":1,"column":190}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":9,"column":16},"generated":{"line":1,"column":199}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":10,"column":4},"generated":{"line":1,"column":201}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":203}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":205}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":207}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":209}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":19,"column":10},"generated":{"line":1,"column":212}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":19,"column":10},"generated":{"line":1,"column":216}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":1,"column":218}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":19,"column":21},"generated":{"line":1,"column":220}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":21,"column":10},"generated":{"line":1,"column":224}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":226}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":227}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":21,"column":27},"generated":{"line":1,"column":233}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":21,"column":38},"generated":{"line":1,"column":243}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":21,"column":49},"generated":{"line":1,"column":253}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":22,"column":10},"generated":{"line":1,"column":257}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":22,"column":17},"generated":{"line":1,"column":259}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":22,"column":19},"generated":{"line":1,"column":260}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":22,"column":26},"generated":{"line":1,"column":266}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":22,"column":37},"generated":{"line":1,"column":276}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":22,"column":48},"generated":{"line":1,"column":286}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":24,"column":11},"generated":{"line":1,"column":292}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":24,"column":11},"generated":{"line":1,"column":299}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":24,"column":17},"generated":{"line":1,"column":301}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":24,"column":26},"generated":{"line":1,"column":310}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":24,"column":33},"generated":{"line":1,"column":317}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":24,"column":34},"generated":{"line":1,"column":326}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":24,"column":57},"generated":{"line":1,"column":328}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":26,"column":12},"generated":{"line":1,"column":331}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":26,"column":13},"generated":{"line":1,"column":335}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":26,"column":20},"generated":{"line":1,"column":337}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":26,"column":43},"generated":{"line":1,"column":358}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":26,"column":51},"generated":{"line":1,"column":360}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":26,"column":61},"generated":{"line":1,"column":368}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":26,"column":69},"generated":{"line":1,"column":370}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":27,"column":19},"generated":{"line":1,"column":375}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":27,"column":19},"generated":{"line":1,"column":382}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":1,"column":384}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":1,"column":388}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":1,"column":390}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":1,"column":392}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":30,"column":42},"generated":{"line":1,"column":404}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":30,"column":50},"generated":{"line":1,"column":406}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":31,"column":14},"generated":{"line":1,"column":413}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":31,"column":21},"generated":{"line":1,"column":415}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":31,"column":29},"generated":{"line":1,"column":417}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":31,"column":41},"generated":{"line":1,"column":429}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":31,"column":49},"generated":{"line":1,"column":431}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":33,"column":14},"generated":{"line":1,"column":437}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":33,"column":23},"generated":{"line":1,"column":439}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":33,"column":30},"generated":{"line":1,"column":441}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":33,"column":50},"generated":{"line":1,"column":459}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":33,"column":66},"generated":{"line":1,"column":461}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":33,"column":66},"generated":{"line":1,"column":477}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":34,"column":14},"generated":{"line":1,"column":482}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":34,"column":23},"generated":{"line":1,"column":484}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":34,"column":30},"generated":{"line":1,"column":486}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":34,"column":50},"generated":{"line":1,"column":504}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":34,"column":66},"generated":{"line":1,"column":506}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":34,"column":66},"generated":{"line":1,"column":522}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":35,"column":14},"generated":{"line":1,"column":527}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":35,"column":29},"generated":{"line":1,"column":529}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":35,"column":38},"generated":{"line":1,"column":531}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":35,"column":47},"generated":{"line":1,"column":537}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":38,"column":14},"generated":{"line":1,"column":539}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":38,"column":20},"generated":{"line":1,"column":541}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":38,"column":24},"generated":{"line":1,"column":543}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":38,"column":30},"generated":{"line":1,"column":545}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":38,"column":34},"generated":{"line":1,"column":547}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":39,"column":14},"generated":{"line":1,"column":549}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":39,"column":23},"generated":{"line":1,"column":551}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":39,"column":27},"generated":{"line":1,"column":553}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":39,"column":32},"generated":{"line":1,"column":555}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":39,"column":36},"generated":{"line":1,"column":557}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":39,"column":41},"generated":{"line":1,"column":559}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":39,"column":50},"generated":{"line":1,"column":566}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":68,"column":12},"generated":{"line":1,"column":568}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":571}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":42,"column":12},"generated":{"line":1,"column":573}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":43,"column":12},"generated":{"line":1,"column":579}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":581}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":583}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":594}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":44,"column":27},"generated":{"line":1,"column":596}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":44,"column":32},"generated":{"line":1,"column":602}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":45,"column":16},"generated":{"line":1,"column":618}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":46,"column":16},"generated":{"line":1,"column":620}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":46,"column":17},"generated":{"line":1,"column":621}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":46,"column":23},"generated":{"line":1,"column":623}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":36,"column":30},"generated":{"line":1,"column":625}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":47,"column":16},"generated":{"line":1,"column":632}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":47,"column":17},"generated":{"line":1,"column":633}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":47,"column":23},"generated":{"line":1,"column":635}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":36,"column":30},"generated":{"line":1,"column":637}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":51,"column":12},"generated":{"line":1,"column":646}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":52,"column":12},"generated":{"line":1,"column":649}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":1,"column":651}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":53,"column":16},"generated":{"line":1,"column":657}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":54,"column":23},"generated":{"line":1,"column":659}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":54,"column":23},"generated":{"line":1,"column":661}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":54,"column":23},"generated":{"line":1,"column":672}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":54,"column":31},"generated":{"line":1,"column":674}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":54,"column":36},"generated":{"line":1,"column":680}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":55,"column":20},"generated":{"line":1,"column":692}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":56,"column":20},"generated":{"line":1,"column":694}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":1,"column":695}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":56,"column":28},"generated":{"line":1,"column":697}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":1,"column":701}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":57,"column":20},"generated":{"line":1,"column":704}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":57,"column":21},"generated":{"line":1,"column":705}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":57,"column":24},"generated":{"line":1,"column":707}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":59,"column":16},"generated":{"line":1,"column":712}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":60,"column":23},"generated":{"line":1,"column":714}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":60,"column":23},"generated":{"line":1,"column":716}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":60,"column":23},"generated":{"line":1,"column":727}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":60,"column":31},"generated":{"line":1,"column":729}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":60,"column":36},"generated":{"line":1,"column":735}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":61,"column":20},"generated":{"line":1,"column":750}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":62,"column":20},"generated":{"line":1,"column":752}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":753}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":62,"column":28},"generated":{"line":1,"column":755}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":62,"column":34},"generated":{"line":1,"column":759}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":63,"column":20},"generated":{"line":1,"column":762}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":63,"column":21},"generated":{"line":1,"column":763}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":63,"column":24},"generated":{"line":1,"column":765}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":68,"column":12},"generated":{"line":1,"column":770}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":68,"column":20},"generated":{"line":1,"column":772}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":69,"column":18},"generated":{"line":1,"column":773}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":69,"column":18},"generated":{"line":1,"column":777}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":69,"column":28},"generated":{"line":1,"column":779}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":69,"column":32},"generated":{"line":1,"column":781}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":72,"column":18},"generated":{"line":1,"column":783}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":72,"column":39},"generated":{"line":1,"column":785}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":73,"column":16},"generated":{"line":1,"column":786}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":73,"column":23},"generated":{"line":1,"column":792}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":802}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":74,"column":25},"generated":{"line":1,"column":810}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":74,"column":33},"generated":{"line":1,"column":812}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":74,"column":33},"generated":{"line":1,"column":820}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":75,"column":16},"generated":{"line":1,"column":826}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":75,"column":23},"generated":{"line":1,"column":832}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":834}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":840}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":76,"column":16},"generated":{"line":1,"column":847}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":76,"column":22},"generated":{"line":1,"column":852}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":77,"column":16},"generated":{"line":1,"column":862}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":77,"column":22},"generated":{"line":1,"column":867}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":79,"column":12},"generated":{"line":1,"column":870}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":79,"column":16},"generated":{"line":1,"column":872}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":80,"column":16},"generated":{"line":1,"column":878}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":81,"column":23},"generated":{"line":1,"column":880}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":81,"column":23},"generated":{"line":1,"column":882}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":81,"column":23},"generated":{"line":1,"column":893}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":81,"column":31},"generated":{"line":1,"column":895}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":81,"column":36},"generated":{"line":1,"column":901}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":82,"column":20},"generated":{"line":1,"column":914}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":83,"column":20},"generated":{"line":1,"column":916}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":84,"column":20},"generated":{"line":1,"column":918}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":70,"column":29},"generated":{"line":1,"column":920}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":87,"column":16},"generated":{"line":1,"column":926}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":88,"column":23},"generated":{"line":1,"column":928}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":88,"column":23},"generated":{"line":1,"column":930}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":88,"column":23},"generated":{"line":1,"column":941}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":88,"column":31},"generated":{"line":1,"column":943}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":88,"column":36},"generated":{"line":1,"column":949}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":89,"column":20},"generated":{"line":1,"column":965}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":90,"column":20},"generated":{"line":1,"column":967}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":91,"column":20},"generated":{"line":1,"column":969}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":71,"column":32},"generated":{"line":1,"column":971}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":97,"column":15},"generated":{"line":1,"column":977}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":97,"column":15},"generated":{"line":1,"column":984}},{"source":"parse/draw-brackets.ts","name":null,"original":{"line":98,"column":7},"generated":{"line":1,"column":987}}],"sources":{"parse/draw-brackets.ts":"import { VerticalSpans } from \"./measure-vertical-spans\";\nimport { Instruction } from \"../render/instructions\";\nimport { VerticalLayout } from \"./measure-verical-spacing\";\nimport { EngravingConfig } from \"../store/defs\";\nimport { BracketEndStyle } from \"../store/entries/brackets\";\nimport { buildPath } from \"../render/path\";\nimport { TextStyles, Justify, Align, buildText } from \"../render/text\";\n\nexport function drawBrackets(\n    x: number,\n    y: number,\n    spacing: VerticalLayout,\n    spans: VerticalSpans,\n    config: EngravingConfig\n) {\n    // if n > 1 neightbouring instruments in same family -- woodwind, brass, strings only!\n    // subbrace if same instrument type next to each other\n\n    const left = x - 0.75;\n\n    const thick = { color: \"#000000\", thickness: 0.5 };\n    const thin = { color: \"#000000\", thickness: 0.125 };\n\n    return spans.brackets.reduce((out: Instruction<any>, bracket) => {\n        // short circuit if its a single stave and we don't want single staves bracketed.\n        if (!config.bracketSingleStaves && bracket.start === bracket.stop) {\n            return out;\n        }\n\n        const start = spacing.instruments[bracket.start];\n        const stop = spacing.instruments[bracket.stop];\n\n        const isWing = config.bracketEndStyle === BracketEndStyle.Wing;\n        const isLine = config.bracketEndStyle === BracketEndStyle.Line;\n        const tweekForWing = isWing ? 0.3125 : 0; // .25 + .0625;\n        const tweekForStave = 0.0625;\n\n        const top = y + start.y - tweekForWing;\n        const bottom = y + stop.y + stop.height + tweekForWing;\n\n        // vertical thick line shard with all styles\n        out.push(\n            buildPath(\n                `${bracket.start}-vertical-bar`,\n                thick,\n                [left, top - tweekForStave],\n                [left, bottom + tweekForStave]\n            )\n        );\n\n        if (isLine) {\n            out.push(\n                buildPath(\n                    `${bracket.start}-cap--top`,\n                    thin,\n                    [left - 0.25, top],\n                    [x, top]\n                ),\n                buildPath(\n                    `${bracket.start}-cap--bottom`,\n                    thin,\n                    [left - 0.25, bottom],\n                    [x, bottom]\n                )\n            );\n        }\n\n        if (isWing) {\n            const capLeft = x - 1;\n            const glyphTop = \"\\u{E003}\";\n            const glyphBottom = \"\\u{E004}\";\n            const styles: TextStyles = {\n                color: \"#000000\",\n                justify: Justify.Start,\n                align: Align.Middle,\n                font: \"Bravura\",\n                size: 4,\n            };\n            out.push(\n                buildText(\n                    `${bracket.start}-wing--top`,\n                    styles,\n                    capLeft,\n                    top,\n                    glyphTop\n                ),\n                buildText(\n                    `${bracket.start}-wing--bottom`,\n                    styles,\n                    capLeft,\n                    bottom,\n                    glyphBottom\n                )\n            );\n        }\n\n        return out;\n    }, []);\n}\n"},"lineCount":null}},"error":null,"hash":"914a9614e92f64adb745155855b05428","cacheData":{"env":{}}}